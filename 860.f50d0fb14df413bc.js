"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[860],{5860:(O,P,r)=>{r.r(P),r.d(P,{ParentModule:()=>u});var x=r(6895),y=r(9299),e=r(4650),f=r(7613),o=r(4006),v=r(7579);class d{constructor(){this.parentAddedSource=new v.x,this.parentAdded$=this.parentAddedSource.asObservable()}notifyParentAdded(){this.parentAddedSource.next()}}d.\u0275fac=function(t){return new(t||d)},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var C=r(7185);class p{constructor(t,n,i,s){this.fb=t,this.parentService=n,this.parentUpdateService=i,this.toastr=s}ngOnInit(){this.parentForm=this.fb.group({name:[""],last_name:[""],gender:[""],dni:[""],phone_number:[""]})}onSubmit(){this.parentForm.valid?(console.log("Sending POST with data:",JSON.stringify(this.parentForm.value)),this.parentService.addParent(this.parentForm.value).subscribe({next:t=>{this.toastr.success("Parent added successfully"),this.parentForm.reset(),this.parentUpdateService.notifyParentAdded()},error:t=>{this.toastr.error("Failed to add parent"),console.error("Error adding parent:",t)}})):this.toastr.error("Please fill all required fields")}}p.\u0275fac=function(t){return new(t||p)(e.Y36(o.qu),e.Y36(f.H),e.Y36(d),e.Y36(C._W))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-parent-form"]],decls:28,vars:2,consts:[[1,"parent-form-container"],[3,"formGroup","ngSubmit"],["for","name"],["type","text","id","name","formControlName","name"],["for","lastName"],["type","text","id","lastName","formControlName","last_name"],["for","gender"],["id","gender","formControlName","gender"],["value","M"],["value","F"],["for","dni"],["type","text","id","dni","formControlName","dni"],["for","phoneNumber"],["type","text","id","phoneNumber","formControlName","phone_number"],["type","submit",3,"disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(2,"div")(3,"label",2),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div")(7,"label",4),e._uU(8,"Last Name"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div")(11,"label",6),e._uU(12,"Gender"),e.qZA(),e.TgZ(13,"select",7)(14,"option",8),e._uU(15,"Male"),e.qZA(),e.TgZ(16,"option",9),e._uU(17,"Female"),e.qZA()()(),e.TgZ(18,"div")(19,"label",10),e._uU(20,"DNI"),e.qZA(),e._UZ(21,"input",11),e.qZA(),e.TgZ(22,"div")(23,"label",12),e._uU(24,"Phone Number"),e.qZA(),e._UZ(25,"input",13),e.qZA(),e.TgZ(26,"button",14),e._uU(27,"Submit"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.parentForm),e.xp6(25),e.Q6J("disabled",!n.parentForm.valid))},dependencies:[o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u],styles:[".parent-form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;box-shadow:0 0 10px #0000001a}.parent-form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.parent-form-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:5px;box-sizing:border-box;border:1px solid #ccc;border-radius:4px}label[_ngcontent-%COMP%]{font-weight:700}button[type=submit][_ngcontent-%COMP%]{background-color:#212121;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc}button[type=submit][_ngcontent-%COMP%]:not(:disabled):hover{background-color:#161616}"]});var Z=r(7155),c=r(2722),m=r(5412),S=r(5665),A=r(2642);class b{constructor(t,n,i,s){this.data=t,this.parentService=n,this.dialogRef=i,this.toastr=s,this.title="EDITAR PADRE/MADRE",this.unsubscribe$=new v.x,this.parentFormConfig=[{name:"parent_id",label:"ID",type:"number",required:!0,disabled:!0,value:this.data.parent.parent_id},{name:"name",label:"Nombre",type:"text",required:!0,maxLength:50,value:this.data.parent.name},{name:"last_name",label:"Apellido",type:"text",required:!0,maxLength:50,value:this.data.parent.last_name},{name:"phone_number",label:"Tel\xe9fono",type:"text",required:!0,maxLength:15,value:this.data.parent.phone_number},{name:"gender",label:"G\xe9nero",type:"select",required:!0,options:[{value:"M",viewValue:"Masculino"},{value:"F",viewValue:"Femenino"}],value:this.data.parent.gender},{name:"dni",label:"DNI",type:"text",required:!0,maxLength:8,value:this.data.parent.dni}]}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}onSubmit(t){this.parentService.updateParent(this.data.parent.parent_id,t).pipe((0,c.R)(this.unsubscribe$)).subscribe(n=>{this.toastr.success("Padre/Madre actualizado con \xe9xito","\xc9xito",S.UO),this.dialogRef.close(!0)},n=>{this.toastr.error("Error al actualizar el padre/madre","Error",S.gn)})}}b.\u0275fac=function(t){return new(t||b)(e.Y36(m.WI),e.Y36(f.H),e.Y36(m.so),e.Y36(C._W))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-parent-edit"]],decls:2,vars:2,consts:[[3,"title","config","submitEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"app-generic-form",0),e.NdJ("submitEvent",function(s){return n.onSubmit(s)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("title",n.title)("config",n.parentFormConfig))},dependencies:[A.t,m.xY]});var T=r(5045),F=r(6165);class g{constructor(t,n,i,s){this.parentService=t,this.dialog=n,this.crudEventsService=i,this.parentUpdateService=s,this.displayedColumns=["parent_id","name","last_name","gender","dni","phone_number"],this.columnNames=["ID","Nombre","Apellido","Genero","DNI","Tel\xe9fono"],this.unsubscribe$=new v.x,this.dataSource=new Z.by([])}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}ngOnInit(){this.updateTableData(),this.crudEventsService.itemAdded.pipe((0,c.R)(this.unsubscribe$)).subscribe(()=>{this.updateTableData()}),this.parentUpdateService.parentAdded$.pipe((0,c.R)(this.unsubscribe$)).subscribe(()=>{this.updateTableData()})}updateTableData(){this.parentService.getParents().pipe((0,c.R)(this.unsubscribe$)).subscribe(t=>{this.dataSource.data=t})}openEditModal(t){this.dialog.open(b,{data:{parent:t}}).afterClosed().pipe((0,c.R)(this.unsubscribe$)).subscribe(i=>{i&&this.updateTableData()})}onDelete(t){}}g.\u0275fac=function(t){return new(t||g)(e.Y36(f.H),e.Y36(m.uw),e.Y36(T.Z),e.Y36(d))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-parent-list"]],decls:1,vars:3,consts:[[3,"displayedColumns","columnNames","dataSource","edit","delete"]],template:function(t,n){1&t&&(e.TgZ(0,"app-generic-table",0),e.NdJ("edit",function(s){return n.openEditModal(s)})("delete",function(s){return n.onDelete(s)}),e.qZA()),2&t&&e.Q6J("displayedColumns",n.displayedColumns)("columnNames",n.columnNames)("dataSource",n.dataSource)},dependencies:[F.p]});class h{constructor(t){this.parentService=t,this.parents=[]}ngOnInit(){this.loadParents()}loadParents(){this.parentService.getParents().subscribe({next:t=>{this.parents=t},error:t=>{console.error("Error al cargar los parents",t)}})}}h.\u0275fac=function(t){return new(t||h)(e.Y36(f.H))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-parent-page"]],decls:2,vars:0,template:function(t,n){1&t&&e._UZ(0,"app-parent-form")(1,"app-parent-list")},dependencies:[p,g]});const N=[{path:"",component:h,data:{title:"parent"}},{path:"form",component:p,data:{title:"Parent Form"}}];class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[y.Bz.forChild(N),y.Bz]});var M=r(7999),U=r(939);class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[x.ez,l,o.UX,M.G,U.W,m.Is]})}}]);