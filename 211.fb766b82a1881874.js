"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[211],{211:(D,y,r)=>{r.r(y),r.d(y,{ShiftModule:()=>h});var M=r(6895),T=r(9299),Z=r(7155),e=r(4650),c=r(7579),d=r(2722),v=r(7854);class m{constructor(){this.shiftAddedSource=new c.x,this.shiftAdded$=this.shiftAddedSource.asObservable()}shiftAdded(t){this.shiftAddedSource.next(t)}}m.\u0275fac=function(t){return new(t||m)},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var l=r(4006);class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-shift-add"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"shift-add works!"),e.qZA())}});var s=r(5412),A=r(7185),w=r(4859);class g{constructor(){this.submitEvent=new e.vpe}onConfirm(){this.submitEvent.emit(this.Id)}}g.\u0275fac=function(t){return new(t||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-generic-delete"]],inputs:{title:"title",Id:"Id"},outputs:{submitEvent:"submitEvent"},decls:11,vars:5,consts:[[1,"dialog-content"],["mat-dialog-title",""],[1,"dialog-actions"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","warn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content",0)(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.ALo(5,"lowercase"),e.qZA()(),e.TgZ(6,"mat-dialog-actions",2)(7,"button",3),e._uU(8,"Cancelar"),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){return n.onConfirm()}),e._uU(10,"Eliminar"),e.qZA()()),2&t&&(e.xp6(2),e.hij("ELIMINAR ",n.title,""),e.xp6(2),e.AsE("\xbfSeguro que deseas eliminar la ",e.lcZ(5,3,n.title)," con ID ",n.Id,"?"))},dependencies:[s.ZT,s.uh,s.xY,s.H8,w.lW,M.i8],styles:[".dialog-content[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:10px}"]});class _{constructor(t,n,o,i){this.data=t,this.dialogRef=n,this.shiftService=o,this.toastr=i,this.title="TURNO",this.unsubscribe$=new c.x}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}ngOnInit(){this.id=this.data.shift_id}onConfirm(t){this.shiftService.deleteShift(this.data.shift_id).pipe((0,d.R)(this.unsubscribe$)).subscribe({next:()=>{this.dialogRef.close(!0),this.toastr.success("Turno eliminado exitosamente")},error:n=>{this.toastr.error("Error al eliminar el turno")}})}}_.\u0275fac=function(t){return new(t||_)(e.Y36(s.WI),e.Y36(s.so),e.Y36(v.D),e.Y36(A._W))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-shift-delete"]],decls:1,vars:2,consts:[[3,"title","Id","submitEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"app-generic-delete",0),e.NdJ("submitEvent",function(i){return n.onConfirm(i)}),e.qZA()),2&t&&e.Q6J("title",n.title)("Id",n.id)},dependencies:[g]});var P=r(2642);class b{constructor(t,n,o,i){this.data=t,this.dialogRef=n,this.shiftService=o,this.toastr=i,this.title="EDITAR TURNO",this.unsubscribe$=new c.x,this.shiftFormConfig=[{name:"name",label:"Nombre urno",type:"text",required:!0,maxLength:100,value:this.data.shift.name},{name:"start_time",label:"Turno inicio",type:"time",required:!0,value:this.data.shift.start_time},{name:"end_time",label:"Turno fin",type:"time",required:!0,value:this.data.shift.end_time},{name:"entry_start",label:"Inicio Hora Entrada",type:"time",required:!1,value:this.data.shift.entry_start},{name:"entry_end",label:"Fin Hora Entrada",type:"time",required:!1,value:this.data.shift.entry_end},{name:"early_until",label:"Temprano Hasta",type:"time",required:!1,value:this.data.shift.early_until},{name:"late_until",label:"Tarde Hasta",type:"time",required:!1,value:this.data.shift.late_until},{name:"leave_start",label:"Inicio Salida",type:"time",required:!1,value:this.data.shift.leave_start},{name:"leave_end",label:"Fin Salida",type:"time",required:!1,value:this.data.shift.leave_end}]}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}onSubmit(t){this.shiftService.updateShift(this.data.shift.shift_id,t).pipe((0,d.R)(this.unsubscribe$)).subscribe(n=>{this.toastr.success("Turno actualizado con \xe9xito"),this.dialogRef.close(!0)},n=>{this.toastr.error("Error al actualizar el turno")})}}b.\u0275fac=function(t){return new(t||b)(e.Y36(s.WI),e.Y36(s.so),e.Y36(v.D),e.Y36(A._W))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-shift-edit"]],decls:2,vars:2,consts:[[3,"title","config","submitEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"app-generic-form",0),e.NdJ("submitEvent",function(i){return n.onSubmit(i)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("title",n.title)("config",n.shiftFormConfig))},dependencies:[P.t,s.xY]});var O=r(6165);class S{constructor(t,n,o){this.shiftService=t,this.dialog=n,this.shiftEventService=o,this.displayedColumns=["name","start_time","end_time","entry_start","entry_end","early_until","late_until","leave_start","leave_end"],this.columnNames=["Nombre","Turno Inicio","Turno Fin","Inicio Entrada","Fin Entrada","Temprano Hasta","Tarde Hasta","Inicio Salida","Fin Salida"],this.unsubscribe$=new c.x,this.dataSource=new Z.by([])}ngOnDestroy(){this.unsubscribe$.next(null),this.unsubscribe$.complete()}ngOnInit(){this.updateTableData(),this.shiftEventService.shiftAdded$.subscribe({next:t=>{this.updateTableData()}})}updateTableData(){this.shiftService.getShifts().pipe((0,d.R)(this.unsubscribe$)).subscribe(t=>{this.dataSource.data=t})}openEditModal(t){this.dialog.open(b,{data:{shift:t}}).afterClosed().pipe((0,d.R)(this.unsubscribe$)).subscribe(o=>{o&&this.updateTableData()})}openDeleteModal(t){this.dialog.open(_,{data:{shift_id:t.shift_id}}).afterClosed().pipe((0,d.R)(this.unsubscribe$)).subscribe(o=>{o&&this.updateTableData()})}openAddModal(){this.dialog.open(p).afterClosed().pipe((0,d.R)(this.unsubscribe$)).subscribe(n=>{n&&this.updateTableData()})}}S.\u0275fac=function(t){return new(t||S)(e.Y36(v.D),e.Y36(s.uw),e.Y36(m))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-shift-list"]],decls:1,vars:3,consts:[[3,"displayedColumns","columnNames","dataSource","edit","delete","add"]],template:function(t,n){1&t&&(e.TgZ(0,"app-generic-table",0),e.NdJ("edit",function(i){return n.openEditModal(i)})("delete",function(i){return n.openDeleteModal(i)})("add",function(){return n.openAddModal()}),e.qZA()),2&t&&e.Q6J("displayedColumns",n.displayedColumns)("columnNames",n.columnNames)("dataSource",n.dataSource)},dependencies:[O.p]});class C{constructor(t,n,o){this.shiftService=t,this.cdr=n,this.shiftEventService=o,this.newShift={name:"",start_time:"",end_time:"",entry_start:"",entry_end:"",early_until:"",late_until:"",leave_start:"",leave_end:""},this.unsubscribe$=new c.x,this.shifts=[],this.dataSource=new Z.by(this.shifts),this.shiftAdded=new e.vpe}ngOnInit(){}loadShifts(){this.shiftService.getShifts().subscribe({next:t=>{this.dataSource.data=t},error:t=>{console.error("Error al cargar los turnos",t)}})}updateTableData(){this.shiftService.getShifts().pipe((0,d.R)(this.unsubscribe$)).subscribe(t=>{this.dataSource.data=[...t]})}addShift(){this.newShift.name&&this.newShift.start_time&&this.newShift.end_time?this.shiftService.addShift(this.newShift).subscribe({next:t=>{this.loadShifts(),this.resetNewShift(),this.shiftEventService.shiftAdded(t),console.log("Turno agregado con \xe9xito")},error:t=>{console.error("Error al agregar el turno",t)}}):console.error("Todos los campos son obligatorios")}resetNewShift(){this.newShift={name:"",start_time:"",end_time:"",entry_start:"",entry_end:"",early_until:"",late_until:"",leave_start:"",leave_end:""}}}C.\u0275fac=function(t){return new(t||C)(e.Y36(v.D),e.Y36(e.sBO),e.Y36(m))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-shift-page"]],outputs:{shiftAdded:"shiftAdded"},decls:51,vars:9,consts:[[1,"shift-form"],[3,"ngSubmit"],["shiftForm","ngForm"],[1,"form-row"],[1,"col-12"],[1,"col-sm-6"],["for","name"],["type","text","id","name","name","name","placeholder","Ej: Turno Matutino","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-sm-3"],["for","start_time"],["type","time","id","start_time","name","start_time","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","end_time"],["type","time","id","end_time","name","end_time","required","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","entry_start"],["type","time","id","entry_start","name","entry_start",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","entry_end"],["type","time","id","entry_end","name","entry_end",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","early_until"],["type","time","id","early_until","name","early_until",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","late_until"],["type","time","id","late_until","name","late_until",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","leave_start"],["type","time","id","leave_start","name","leave_start",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","leave_end"],["type","time","id","leave_end","name","leave_end",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-sm","btn-add-shift"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){return n.addShift()}),e.TgZ(3,"div",3)(4,"h3",4),e._uU(5,"Informaci\xf3n General del Turno"),e.qZA(),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"Nombre del Turno:"),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(i){return n.newShift.name=i}),e.qZA()(),e.TgZ(10,"div",8)(11,"label",9),e._uU(12,"Turno Inicio:"),e.qZA(),e.TgZ(13,"input",10),e.NdJ("ngModelChange",function(i){return n.newShift.start_time=i}),e.qZA()(),e.TgZ(14,"div",8)(15,"label",11),e._uU(16,"Turno Fin:"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(i){return n.newShift.end_time=i}),e.qZA()()(),e.TgZ(18,"div",3)(19,"h3",4),e._uU(20,"Intervalos de Entrada"),e.qZA(),e.TgZ(21,"div",8)(22,"label",13),e._uU(23,"Inicio Hora de Entrada:"),e.qZA(),e.TgZ(24,"input",14),e.NdJ("ngModelChange",function(i){return n.newShift.entry_start=i}),e.qZA()(),e.TgZ(25,"div",8)(26,"label",15),e._uU(27,"Fin Hora de Entrada:"),e.qZA(),e.TgZ(28,"input",16),e.NdJ("ngModelChange",function(i){return n.newShift.entry_end=i}),e.qZA()(),e.TgZ(29,"div",8)(30,"label",17),e._uU(31,"Temprano hasta:"),e.qZA(),e.TgZ(32,"input",18),e.NdJ("ngModelChange",function(i){return n.newShift.early_until=i}),e.qZA()(),e.TgZ(33,"div",8)(34,"label",19),e._uU(35,"Tarde hasta:"),e.qZA(),e.TgZ(36,"input",20),e.NdJ("ngModelChange",function(i){return n.newShift.late_until=i}),e.qZA()()(),e.TgZ(37,"div",3)(38,"h3",4),e._uU(39,"Intervalos de Salida"),e.qZA(),e.TgZ(40,"div",8)(41,"label",21),e._uU(42,"Inicio Hora de Salida:"),e.qZA(),e.TgZ(43,"input",22),e.NdJ("ngModelChange",function(i){return n.newShift.leave_start=i}),e.qZA()(),e.TgZ(44,"div",8)(45,"label",23),e._uU(46,"Fin Hora de Salida:"),e.qZA(),e.TgZ(47,"input",24),e.NdJ("ngModelChange",function(i){return n.newShift.leave_end=i}),e.qZA()()(),e.TgZ(48,"button",25),e._uU(49,"Agregar Turno"),e.qZA()()(),e._UZ(50,"app-shift-list")),2&t&&(e.xp6(9),e.Q6J("ngModel",n.newShift.name),e.xp6(4),e.Q6J("ngModel",n.newShift.start_time),e.xp6(4),e.Q6J("ngModel",n.newShift.end_time),e.xp6(7),e.Q6J("ngModel",n.newShift.entry_start),e.xp6(4),e.Q6J("ngModel",n.newShift.entry_end),e.xp6(4),e.Q6J("ngModel",n.newShift.early_until),e.xp6(4),e.Q6J("ngModel",n.newShift.late_until),e.xp6(7),e.Q6J("ngModel",n.newShift.leave_start),e.xp6(4),e.Q6J("ngModel",n.newShift.leave_end))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,S],styles:[".shift-form[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;box-shadow:0 0 10px #0000001a}.shift-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin-bottom:10px}.shift-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .col-sm-6[_ngcontent-%COMP%], .shift-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .col-sm-3[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px}.shift-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.shift-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:.9rem}.shift-form[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{height:calc(1.5em + .5rem + 2px);font-size:.9rem}.shift-form[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.shift-form[_ngcontent-%COMP%]   .btn-add-shift[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:10px 20px;border-radius:8px;border:2px solid white}.shift-form[_ngcontent-%COMP%]   .btn-add-shift[_ngcontent-%COMP%]:hover{background-color:#333;border-color:#f2f2f2}"]});const E=[{path:"",component:C,data:{title:"shift"}}];class f{}f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[T.Bz.forChild(E),T.Bz]});var J=r(7999);class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[M.ez,s.Is,w.ot]});var I=r(939);class h{}h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[M.ez,f,l.u5,J.G,I.W,s.Is,u]})}}]);